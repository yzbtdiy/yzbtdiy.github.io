import{_ as s,c as a,o as i,a5 as n}from"./chunks/framework.ByOCcFwP.js";const u=JSON.parse('{"title":"mindoc 安装","description":"","frontmatter":{"title":"mindoc 安装","date":"2019-06-22T11:39:08.000Z","categories":"linux","tags":["mindoc"]},"headers":[],"relativePath":"devops/linux/mindoc-install.md","filePath":"devops/linux/mindoc-install.md"}'),e={name:"devops/linux/mindoc-install.md"},p=n(`<h2 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to &quot;简介&quot;">​</a></h2><blockquote><p>MinDoc 是基于 go 语言的开源文档管理系统。</p></blockquote><ul><li>GitHub: <a href="https://github.com/lifei6671/mindoc" target="_blank" rel="noreferrer">https://github.com/lifei6671/mindoc</a></li></ul><blockquote><p>由于基于 go 语言，所以可以非常简单通过二进制文件部署。</p></blockquote><h2 id="下载最新-release" tabindex="-1">下载最新 release <a class="header-anchor" href="#下载最新-release" aria-label="Permalink to &quot;下载最新 release&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# mkdir /usr/local/mindoc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# cd /usr/local/mindoc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server mindoc]# wget https://github.com/lifei6671/mindoc/releases/download/v2.0/mindoc_linux_amd64.zip</span></span></code></pre></div><h2 id="解压" tabindex="-1">解压 <a class="header-anchor" href="#解压" aria-label="Permalink to &quot;解压&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server mindoc]# unzip mindoc_linux_amd64.zip</span></span></code></pre></div><h2 id="创建数据库" tabindex="-1">创建数据库 <a class="header-anchor" href="#创建数据库" aria-label="Permalink to &quot;创建数据库&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CREATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DATABASE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mindoc_db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CHARSET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> utf8mb4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COLLATE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> utf8mb4_general_ci</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h2 id="修改配置" tabindex="-1">修改配置 <a class="header-anchor" href="#修改配置" aria-label="Permalink to &quot;修改配置&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server mindoc]# vim conf/app.conf</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db_adapter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mysql</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db_host</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db_port</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3306</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db_database</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mindoc_db</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db_username</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">root</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db_password</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">db_password</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span></code></pre></div><h2 id="创建-systemd-unit" tabindex="-1">创建 systemd unit <a class="header-anchor" href="#创建-systemd-unit" aria-label="Permalink to &quot;创建 systemd unit&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server mindoc]# ./mindoc_linux_amd64 service install</span></span></code></pre></div><h2 id="启动服务-开机启动" tabindex="-1">启动服务，开机启动 <a class="header-anchor" href="#启动服务-开机启动" aria-label="Permalink to &quot;启动服务，开机启动&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server mindoc]# systemctl start mindocd</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server mindoc]# systemctl enable mindocd</span></span></code></pre></div><h2 id="nginx-代理" tabindex="-1">nginx 代理 <a class="header-anchor" href="#nginx-代理" aria-label="Permalink to &quot;nginx 代理&quot;">​</a></h2><div class="language-conf vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">conf</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>server {</span></span>
<span class="line"><span>    listen       80;</span></span>
<span class="line"><span>    server_name  docs.example.com;</span></span>
<span class="line"><span>    charset utf-8;</span></span>
<span class="line"><span>    access_log  /var/log/nginx/webhook.iminho.me/access.log;</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    location / {</span></span>
<span class="line"><span>        try_files /_not_exists_ @backend;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    location @backend {</span></span>
<span class="line"><span>        proxy_set_header X-Forwarded-For $remote_addr;</span></span>
<span class="line"><span>        proxy_set_header Host            $http_host;</span></span>
<span class="line"><span>        proxy_set_header   X-Forwarded-Proto $scheme;</span></span>
<span class="line"><span>        proxy_pass http://127.0.0.1:8181;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="caddy-代理" tabindex="-1">caddy 代理 <a class="header-anchor" href="#caddy-代理" aria-label="Permalink to &quot;caddy 代理&quot;">​</a></h2><div class="language-conf vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">conf</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>http://docs.example.com {</span></span>
<span class="line"><span>  gzip</span></span>
<span class="line"><span>  proxy / 127.0.0.1:8181 {</span></span>
<span class="line"><span>    header_upstream X-Forwarded-For {remote}</span></span>
<span class="line"><span>    header_upstream Host {host}</span></span>
<span class="line"><span>    header_upstream X-Forwarded-Proto {scheme}</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre></div>`,20),l=[p];function t(h,o,d,r,c,k){return i(),a("div",null,l)}const m=s(e,[["render",t]]);export{u as __pageData,m as default};
