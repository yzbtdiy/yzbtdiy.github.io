import{_ as s,c as i,o as a,a5 as n}from"./chunks/framework.ByOCcFwP.js";const c=JSON.parse('{"title":"PXE & Kickstart 安装 CentOS7","description":"","frontmatter":{"title":"PXE & Kickstart 安装 CentOS7","date":"2019-05-09T09:44:49.000Z","categories":"linux","tags":["pxe","kickstart"]},"headers":[],"relativePath":"devops/linux/pxe-kickstart.md","filePath":"devops/linux/pxe-kickstart.md"}'),l={name:"devops/linux/pxe-kickstart.md"},h=n(`<p><img src="https://cdn.jsdelivr.net/gh/yzbtdiy/images@main/linux/pxe-desc.svg" alt=""></p><h2 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to &quot;简介&quot;">​</a></h2><ul><li>PXE是基于 server/client 模式的技术，让客户端从远程服务器下载启动镜像，从而实现网络启动。客户端要求服务器通过 DHCP 分配 IP 地址，再通过 TFTP 下载启动镜像。</li><li>Kickstart 将安装过程中需要手动设置的参数保存为应答文件，通过读取应答文件实现无人值守安装。</li><li>安装源可以通过 FTP，NFS，HTTP 等提供。</li></ul><h2 id="安装软件包" tabindex="-1">安装软件包 <a class="header-anchor" href="#安装软件包" aria-label="Permalink to &quot;安装软件包&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# yum -y install tftp-server dhcp syslinux httpd</span></span></code></pre></div><h2 id="配置-dhcp" tabindex="-1">配置 dhcp <a class="header-anchor" href="#配置-dhcp" aria-label="Permalink to &quot;配置 dhcp&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# vim /etc/dhcp/dhcpd.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subnet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 172.25.254.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netmask</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  range</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 172.25.254.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 172.25.254.250</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  option</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> routers</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 172.25.254.254</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  default-lease-time</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  max-lease-time</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  filename</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/pxelinux.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# systemctl restart dhcpd</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# systemctl enable dhcpd</span></span></code></pre></div><h2 id="关闭防火墙和-selinux" tabindex="-1">关闭防火墙和 SELinux <a class="header-anchor" href="#关闭防火墙和-selinux" aria-label="Permalink to &quot;关闭防火墙和 SELinux&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# systemctl stop firewalld</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# systemctl disable firewalld</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# setenforce 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# vim /etc/selinux/config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SELINUX</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">disabled</span></span></code></pre></div><h2 id="配置-tftp" tabindex="-1">配置 tftp <a class="header-anchor" href="#配置-tftp" aria-label="Permalink to &quot;配置 tftp&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# vim /etc/xinetd.d/tftp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tftp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        socket_type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dgram</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> udp</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        wait</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yes</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/sbin/in.tftpd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        server_args</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/tftpboot</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        disable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                 =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> no</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        per_source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 11</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        cps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                     =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        flags</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                   =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IPv4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# systemctl restart tftp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# systemctl enable tftp</span></span></code></pre></div><h2 id="配置-pxe-引导文件" tabindex="-1">配置 pxe 引导文件 <a class="header-anchor" href="#配置-pxe-引导文件" aria-label="Permalink to &quot;配置 pxe 引导文件&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# mkdir /var/www/html/cdrom</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# mount /dev/sr0 /var/www/html/cdrom</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# cp /var/www/html/cdrom/isolinux/{</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vmlinuz,initrd.img}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/tftpboot/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# mkdir /var/lib/tftpboot/pxelinux.cfg</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# cp /var/www/html/cdrom/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux.cfg/default</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# vim /var/lib/tftpboot/pxelinux.cfg/default</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">label</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  menu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> label</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ^Install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CentOS</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  kernel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vmlinuz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  append</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> initrd=initrd.img</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inst.stage2=http://172.25.254.254/cdrom</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ks=http://172.25.254.254/ks.cfg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> quiet</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span></code></pre></div><h2 id="准备-kickstart-无人值守文件" tabindex="-1">准备 Kickstart 无人值守文件 <a class="header-anchor" href="#准备-kickstart-无人值守文件" aria-label="Permalink to &quot;准备 Kickstart 无人值守文件&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# cp anaconda-ks.cfg /var/www/html/ks.cfg</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#version=DEVEL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># System authorization information</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">auth</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --enableshadow</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --passalgo=sha512</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Use CDROM installation media</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">url</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --url=http://172.25.254.254/cdrom</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Use graphical install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">graphical</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run the Setup Agent on first boot</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firstboot</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ignoredisk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --only-use=sda</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Keyboard layouts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keyboard</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --vckeymap=us</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --xlayouts=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;us&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># System language</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lang</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> en_US.UTF-8</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Network information</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">network</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --bootproto=dhcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --device=ens33</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --onboot=off</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv6=auto</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-activate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">network</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --hostname=localhost.localdomain</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Root password</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rootpw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --iscrypted</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> $6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$BJfADb7EusYxHOyu$aKf2OgGT3qSOKdwgvUd8y3ZI4T4ZWe40DZ4ZfN4PEA8ceFuuauBGVUsqM12RYu36w8SwdKzjbXz2kt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.NdxSmn.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># System services</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">services</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --disabled=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chronyd&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># System timezone</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">timezone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Asia/Shanghai</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --isUtc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --nontp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># System bootloader configuration</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bootloader</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --append=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot; crashkernel=auto&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --location=mbr</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --boot-drive=sda</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">autopart</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --type=lvm</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Partition clearing information</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearpart</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --none</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --initlabel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%packages</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@^minimal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@core</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kexec-tools</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%addon</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com_redhat_kdump</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --enable</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --reserve-mb=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;auto&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%anaconda</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pwpolicy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --minlen=6</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --minquality=1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --notstrict</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --nochanges</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --notempty</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pwpolicy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --minlen=6</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --minquality=1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --notstrict</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --nochanges</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --emptyok</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pwpolicy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> luks</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --minlen=6</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --minquality=1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --notstrict</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --nochanges</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --notempty</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">%end</span></span></code></pre></div><h2 id="启动-apache-测试能否访问安装源和-ks-文件" tabindex="-1">启动 apache，测试能否访问安装源和 ks 文件 <a class="header-anchor" href="#启动-apache-测试能否访问安装源和-ks-文件" aria-label="Permalink to &quot;启动 apache，测试能否访问安装源和 ks 文件&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# systemctl restart httpd</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# systemctl enable httpd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">浏览器访问</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 172.25.254.254/cdrom</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 和</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 172.25.254.254/ks.cfg</span></span></code></pre></div><h2 id="裸机网络引导安装系统" tabindex="-1">裸机网络引导安装系统 <a class="header-anchor" href="#裸机网络引导安装系统" aria-label="Permalink to &quot;裸机网络引导安装系统&quot;">​</a></h2>`,18),t=[h];function p(k,e,r,d,F,g){return a(),i("div",null,t)}const o=s(l,[["render",p]]);export{c as __pageData,o as default};
