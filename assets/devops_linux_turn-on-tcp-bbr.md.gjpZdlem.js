import{_ as s,c as i,o as a,a5 as t}from"./chunks/framework.ByOCcFwP.js";const E=JSON.parse('{"title":"开启 TCP BBR","description":"","frontmatter":{"title":"开启 TCP BBR","date":"2019-07-19T11:23:29.000Z","categories":"linux","tags":["bbr","kernel"]},"headers":[],"relativePath":"devops/linux/turn-on-tcp-bbr.md","filePath":"devops/linux/turn-on-tcp-bbr.md"}'),n={name:"devops/linux/turn-on-tcp-bbr.md"},e=t(`<blockquote><p>Linux kernel 4.9 以上可以直接开启 TCP 拥塞控制算法 BBR (Bottleneck Bandwidth and RTT)。</p></blockquote><h2 id="查看内核版本" tabindex="-1">查看内核版本 <a class="header-anchor" href="#查看内核版本" aria-label="Permalink to &quot;查看内核版本&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@CentOS7 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# uname -a</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Linux</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CentOS7</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 5.2.1-1.el7.elrepo.x86_64</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #1 SMP Sun Jul 14 08:15:04 EDT 2019 x86_64 x86_64 x86_64 GNU/Linux</span></span></code></pre></div><p>如果内核版本过低请升级内核，参考：</p><p><a href="https://www.yzbtdiy.com/linux/elrepo-update-kernel.html" target="_blank" rel="noreferrer">https://www.yzbtdiy.com/linux/elrepo-update-kernel.html</a></p><h2 id="添加系统参数" tabindex="-1">添加系统参数 <a class="header-anchor" href="#添加系统参数" aria-label="Permalink to &quot;添加系统参数&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@CentOS7 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# echo </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;net.core.default_qdisc=fq&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /etc/sysctl.conf</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@CentOS7 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# echo </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;net.ipv4.tcp_congestion_control=bbr&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /etc/sysctl.conf</span></span></code></pre></div><h2 id="加载系统参数" tabindex="-1">加载系统参数 <a class="header-anchor" href="#加载系统参数" aria-label="Permalink to &quot;加载系统参数&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@CentOS7 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# systctl -p</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.core.default_qdisc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fq</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.ipv4.tcp_congestion_control</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bbr</span></span></code></pre></div><h2 id="验证是否生效" tabindex="-1">验证是否生效 <a class="header-anchor" href="#验证是否生效" aria-label="Permalink to &quot;验证是否生效&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@CentOS7 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# sysctl net.ipv4.tcp_available_congestion_control</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.ipv4.tcp_available_congestion_control</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reno</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cubic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bbr</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@CentOS7 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# sysctl net.ipv4.tcp_congestion_control</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.ipv4.tcp_congestion_control</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bbr</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@CentOS7 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# lsmod </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bbr</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tcp_bbr</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                20480</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  24</span></span></code></pre></div>`,11),l=[e];function h(p,k,r,o,d,c){return a(),i("div",null,l)}const F=s(n,[["render",h]]);export{E as __pageData,F as default};
